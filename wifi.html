<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Akses Wi-Fi</title>
<style>
  /* --- RESET & DASAR --- */
  html, body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background-color: #f0f4f8; 
    overflow-x: hidden;
  }

  /* --- KONTAINER UTAMA --- */
  .container {
    max-width: 480px; 
    margin: 40px auto; 
    padding: 30px 20px;
    background: #ffffff; 
    border-radius: 24px; 
    box-shadow: 0 10px 30px rgba(32, 94, 108, 0.1); 
    box-sizing: border-box;
  }
  
  @media (max-width: 480px) {
    .container { margin: 15px auto; border-radius: 16px; }
  }

  /* --- TOMBOL KEMBALI --- */
  .btn-back {
    display: inline-flex; align-items: center; gap: 8px;
    background-color: #ffffff; color: #205E6C; border: 1px solid #205E6C;
    padding: 8px 20px; border-radius: 50px; text-decoration: none;
    font-size: 13px; font-weight: 700; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    margin-bottom: 25px; transition: all 0.2s;
  }
  .btn-back:hover { background-color: #205E6C; color: #ffffff; }

  .header-section { text-align: center; margin-bottom: 25px; }
  .page-title { color: #205E6C; font-weight: 800; font-size: 20px; margin: 0; }
  .page-subtitle { font-size: 13px; color: #64748b; margin-top: 5px; }

  /* --- GRID KARTU WIFI --- */
  .wifi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 30px; }

  .wifi-card {
    background: #ffffff; border-radius: 16px; padding: 15px 10px;
    display: flex; flex-direction: column; align-items: center; text-align: center;
    border: 1px solid #e2e8f0; box-shadow: 0 2px 5px rgba(0,0,0,0.02);
    transition: transform 0.2s;
  }
  .wifi-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(32, 94, 108, 0.1); }
  
  .qr-img { width: 90px; height: 90px; margin-bottom: 8px; border-radius: 6px; }
  .wifi-ssid { font-size: 13px; font-weight: 700; color: #205E6C; margin-bottom: 4px; line-height: 1.2; }

  .wifi-pass-small {
    font-size: 11px; color: #475569; background: #f8fafc;
    padding: 2px 8px; border-radius: 4px; margin-bottom: 10px;
    font-family: monospace; border: 1px solid #e2e8f0;
  }

  .btn-smart {
    background: #205E6C; color: white; border: none;
    width: 100%; padding: 10px; border-radius: 8px;
    font-size: 11px; font-weight: 700; cursor: pointer;
    display: flex; align-items: center; justify-content: center; gap: 5px;
    transition: background 0.2s; box-shadow: 0 2px 4px rgba(32, 94, 108, 0.2);
  }
  .btn-smart:hover { background: #164652; }
  .btn-smart:active { transform: scale(0.95); }
  .btn-smart.active { background: #2e7d32; }

  /* --- CUSTOM FORM TICKET (WIFI) --- */
  .ticket-form-card {
    background: #ffffff; border: 1px solid #fca5a5;
    border-radius: 16px; padding: 20px; text-align: left;
    box-shadow: 0 4px 6px rgba(220, 38, 38, 0.05); /* Bayangan kemerahan tipis */
  }

  .form-header {
    display: flex; align-items: center; gap: 10px;
    margin-bottom: 20px; border-bottom: 2px solid #fef2f2;
    padding-bottom: 12px;
  }

  .form-header-icon { font-size: 24px; }
  .form-header-title { font-weight: 800; color: #dc2626; font-size: 16px; }

  .form-group { margin-bottom: 16px; }
  
  .form-group label {
    display: block; font-size: 13px; font-weight: 700;
    color: #475569; margin-bottom: 8px;
  }

  .form-group select, .form-group input[type="text"], .form-group textarea {
    width: 100%; padding: 12px; border: 1px solid #cbd5e1;
    border-radius: 10px; font-family: inherit; font-size: 14px;
    box-sizing: border-box; background-color: #f8fafc; transition: all 0.2s;
  }

  .form-group select:focus, .form-group input[type="text"]:focus, .form-group textarea:focus {
    outline: none; border-color: #dc2626; background-color: #ffffff;
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
  }

  .form-group input[type="file"] {
    width: 100%; padding: 10px; border: 1px dashed #cbd5e1;
    border-radius: 10px; font-size: 12px; background-color: #f8fafc; color: #475569;
  }

  .btn-submit {
    background: #dc2626; /* Warna merah untuk lapor gangguan */
    color: white; border: none; padding: 14px; width: 100%;
    border-radius: 10px; font-weight: 800; font-size: 14px;
    cursor: pointer; transition: background 0.2s; margin-top: 10px;
  }
  
  .btn-submit:hover { background: #b91c1c; }
  .btn-submit:disabled { background: #94a3b8; cursor: not-allowed; }

</style>
</head>
<body>

<div class="container">

  <div style="text-align: left;">
    <a href="index.html" class="btn-back">
      <span>‚ùÆ</span> Menu Utama
    </a>
  </div>

  <div class="header-section">
    <h2 class="page-title">Akses Wi-Fi</h2>
    <p class="page-subtitle">Pilih lokasi untuk tersambung</p>
  </div>

  <div class="wifi-grid">
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Gedung%20A;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Gedung A</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Gedung%20A', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Kelas%20Aula;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Kelas Aula</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Kelas%20Aula', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Kelas%20Rajawali;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Kelas Rajawali</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Kelas%20Rajawali', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Kelas%20Cendrawasih;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Kelas Cendrawasih</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Kelas%20Cendrawasih', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Gedung%20E%20Lt%201;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Gedung E Lt 1</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Gedung%20E%20Lt%201', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Gedung%20E%20Lt%202;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Gedung E Lt 2</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Gedung%20E%20Lt%202', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Gedung%20F%20Lt%201;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Gedung F Lt 1</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Gedung%20F%20Lt%201', 'tes1234')">üöÄ Sambung</button>
    </div>
    <div class="wifi-card">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:Gedung%20F%20Lt.%202;P:kemendagri;;" class="qr-img">
      <div class="wifi-ssid">Gedung F Lt. 2</div>
      <div class="wifi-pass-small">Pass: kemendagri</div>
      <button class="btn-smart" onclick="smartConnect(this, 'Gedung%20F%20Lt.%202', 'tes1234')">üöÄ Sambung</button>
    </div>
  </div>

  <div class="ticket-form-card">
    <div class="form-header">
      <div class="form-header-icon">üì∂</div>
      <div class="form-header-title">Lapor Gangguan Wi-Fi</div>
    </div>
    
    <form id="formWifi" name="submit-to-google-sheet">
      
      <div class="form-group">
        <label for="nama">Nama Pelapor / Peserta</label>
        <input type="text" id="nama" name="nama" placeholder="Contoh: Budi Santoso" required>
      </div>

      <div class="form-group">
        <label for="lokasi">Lokasi Jaringan / Gedung</label>
        <select id="lokasi" name="lokasi" required>
          <option value="" disabled selected>-- Pilih Lokasi --</option>
          <option value="Gedung A">Gedung A</option>
          <option value="Kelas Aula">Kelas Aula</option>
          <option value="Kelas Rajawali">Kelas Rajawali</option>
          <option value="Kelas Cendrawasih">Kelas Cendrawasih</option>
          <option value="Gedung E Lt 1">Gedung E Lt 1</option>
          <option value="Gedung E Lt 2">Gedung E Lt 2</option>
          <option value="Gedung F Lt 1">Gedung F Lt 1</option>
          <option value="Gedung F Lt 2">Gedung F Lt 2</option>
          <option value="Lainnya">Lainnya / Tidak Tahu</option>
        </select>
      </div>

      <div class="form-group">
        <label for="gangguan">Jenis Gangguan</label>
        <select id="gangguan" name="gangguan" required>
          <option value="" disabled selected>-- Pilih Kendala --</option>
          <option value="Sinyal Lemah/Putus">Sinyal Lemah / Sering Putus</option>
          <option value="Tidak Bisa Konek">Sinyal Ada Tapi Tidak Bisa Konek</option>
          <option value="Password Salah">Gagal Login / Password Salah</option>
          <option value="Lainnya">Lainnya</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="keluhan">Keterangan Tambahan</label>
        <textarea id="keluhan" name="keluhan" rows="2" placeholder="Jelaskan di sini... (Opsional)"></textarea>
      </div>

      <div class="form-group">
        <label for="foto">Screenshot Error <span style="font-weight: normal; color: #64748b;">(Opsional)</span></label>
        <input type="file" id="foto" accept="image/png, image/jpeg, image/jpg">
      </div>
      
      <button type="submit" class="btn-submit" id="btnSubmit">KIRIM LAPORAN WIFI</button>
    </form>
  </div>

</div>

<script>
  // FUNGSI 1: SMART CONNECT (TIDAK DIHILANGKAN)
  function smartConnect(btn, ssid, password) {
    var originalText = btn.innerHTML;
    btn.innerHTML = "Mencoba...";
    btn.classList.add("active");

    navigator.clipboard.writeText(password).then(function() {}).catch(function() {});

    setTimeout(function() {
      window.location.href = "WIFI:T:WPA;S:" + ssid + ";P:" + password + ";;";
      btn.innerHTML = "‚úÖ Tersalin";
      setTimeout(function() {
        btn.innerHTML = originalText;
        btn.classList.remove("active");
      }, 3000);
    }, 500);
  }

  // FUNGSI 2: PENGIRIM FORMULIR LAPORAN GANGGUAN WIFI
  // PENTING: GANTI TEKS DI BAWAH INI DENGAN URL WEB APP WIFI MILIK ANDA!
  const scriptURL = 'https://script.google.com/macros/s/AKfycbwrgkkpOxjtCvzlwFA5QqDK-VquDkKw-kQJjENijmF803WJ1nO-tISzpgd1KNxwLt_-/exec';
  
  const form = document.forms['submit-to-google-sheet'];
  const btnSubmit = document.getElementById('btnSubmit');
  const fileInput = document.getElementById('foto');

  form.addEventListener('submit', e => {
    e.preventDefault(); 
    
    const originalText = btnSubmit.innerHTML;
    btnSubmit.innerHTML = 'MENGIRIM... ‚è≥';
    btnSubmit.disabled = true;

    const formData = new FormData(form);
    const file = fileInput.files[0];

    if (file) {
      btnSubmit.innerHTML = 'MENGUNGGAH FOTO... ‚è≥';
      const reader = new FileReader();
      reader.onload = function(event) {
        const base64Data = event.target.result.split(',')[1];
        formData.append('fileData', base64Data);
        formData.append('mimeType', file.type);
        formData.append('fileName', file.name);
        
        sendDataToGAS(formData, originalText);
      };
      reader.readAsDataURL(file);
    } else {
      sendDataToGAS(formData, originalText);
    }
  });

  function sendDataToGAS(formData, originalText) {
    fetch(scriptURL, { method: 'POST', body: formData })
      .then(response => {
        alert('‚úÖ Laporan gangguan Wi-Fi berhasil dikirim! Tim IT akan segera mengecek.');
        form.reset(); 
        btnSubmit.innerHTML = originalText;
        btnSubmit.disabled = false;
      })
      .catch(error => {
        alert('‚ùå Gagal mengirim laporan. Periksa koneksi internet Anda atau lapor manual ke petugas.');
        console.error('Error!', error.message);
        btnSubmit.innerHTML = originalText;
        btnSubmit.disabled = false;
      });
  }
</script>

</body>
</html>


